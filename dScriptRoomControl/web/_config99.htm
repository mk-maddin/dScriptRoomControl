<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration</title>
    <link rel="stylesheet" type="text/css" href="dscript.css">
 </head>

<body onload="startAJAX()">
    <div id="container">
            <p id="ModuleName"> ~Module~ <span style="font-size: 40%">  System Configuration  - Entities </span> </p>
            <p id="devantech"> By Martin Kraemer </p>
          <br>
        <div id="hr"> <hr style="width: 100%; height: 1px; background-color: #FFFFFF; border: none">  </div>
        <div w3-include-html="_menubar.htm"></div>
        <div id="centerblock">
            <div id="center">
                <div onmouseover="LightsText(this)" onmouseout="PageText(this)">
                    <div class="item-line"> Count Lights </div>
                    <input type="text" value = "~App_Lights~" onkeyup="UpdateEntities(this)" id="AppLights">
                </div>
                <div onmouseover="LightsOffsetText(this)" onmouseout="PageText(this)">
                    <div class="item-line"> Light Rly max </div>
                    <input type="text" value = "~App_LightsOffset~" onkeyup="UpdateEntities(this)" id="AppLightsOffset">
                </div>
                <br>
                <div onmouseover="ShuttersText(this)" onmouseout="PageText(this)">
                    <div class="item-line"> Count Shutters </div>
                    <input type="text" value = "~App_Shutters~" onkeyup="UpdateEntities(this)" id="AppShutters">
                </div>
                <br>
                <div onmouseover="SocketsText(this)" onmouseout="PageText(this)">
                    <div class="item-line"> Count Sockets</div>
                    <input type="text" disabled value = "~App_Sockets~" id="AppSockets">
                </div>
                <br>
                <div onmouseover="MotionText(this)" onmouseout="PageText(this)">
                    <div class="item-line"> Count Motions</div>
                    <input type="text" disabled value = "~App_Motions~" id="AppMotions">
                </div>
            </div>
        </div>
        <div id="helpblock">
            <div ID="help">
            </div>
            <div>
                <div class='Indicator1'>  <img class='IO' id='Pend' src='DarkOff.png'/> Update Pending </div>
            </div>
        </div>
    </div>

<script type='text/javascript' src='globalfunctions.js'></script>
<script type='text/javascript' src='helptext.js'></script>
<script>

// define the default help text for this page
function PageText(x) {
    AppCfgText(x)
}

// setup the dynamic page content
includeHTML();
PageText(0);

// document.getElementById('AppLights').value = ~App_Lights~;
// document.getElementById('AppShutters').value = ~App_Shutters~;

function UpdateEntities(obj) {
    console.log('UpdateEntities...');
    if (obj.id == 'AppLights'){
        newAJAXCommand('dscript.cgi?App_Lights='+obj.value);
    } else if (obj.id == 'AppLightsOffset'){
        newAJAXCommand('dscript.cgi?App_LightsOffset='+obj.value);
    } else if (obj.id == 'AppShutters'){
        newAJAXCommand('dscript.cgi?App_Shutters='+obj.value);
        location.reload(true);
    }
    newAJAXCommand('dscript.cgi?App_EntityCountsUpdated=1');
//    newAJAXCommand('dscript.cgi?SystemCmdUpdated=1');
    console.log('UpdateEntities complete');
}

</script>

</body>
</html>

