<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration</title>
    <link rel="stylesheet" type="text/css" href="dscript.css">
 </head>

<body onload="startAJAX()">
    <div id="container">
            <p id="ModuleName"> ~Module~ <span style="font-size: 40%">  System Configuration  - Input / Output </span> </p>
            <p id="devantech"> By Martin Kraemer </p>
          <br>
        <div id="hr"> <hr style="width: 100%; height: 1px; background-color: #FFFFFF; border: none">  </div>
        <div w3-include-html="_menubar.htm"></div>
        <div id="centerblock">
            <div>
                <div class="item-line"> I/O 1 </div>
                 <select id="IO1Type" onChange="newAJAXCommand('dscript.cgi?App_IOType1='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet1~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet1='+document.getElementById('IO1Sets').value);" id="IO1Sets">
            </div>
            <div>
                <div class="item-line"> I/O 2 </div>
                <select id="IO2Type" onChange="newAJAXCommand('dscript.cgi?App_IOType2='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet2~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet2='+document.getElementById('IO2Sets').value);" id="IO2Sets">
            </div>
            <div>
                <div class="item-line"> I/O 3 </div>
                 <select id="IO3Type" onChange="newAJAXCommand('dscript.cgi?App_IOType3='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>               
                <input type="text" value = "~App_IOSet3~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet3='+document.getElementById('IO3Sets').value);" id="IO3Sets">
            </div>
            <div>
                <div class="item-line"> I/O 4 </div>
                <select id="IO4Type" onChange="newAJAXCommand('dscript.cgi?App_IOType4='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet4~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet4='+document.getElementById('IO4Sets').value);" id="IO4Sets">
            </div>
            <div>
                <div class="item-line"> I/O 5 </div>
                <select id="IO5Type" onChange="newAJAXCommand('dscript.cgi?App_IOType5='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet5~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet5='+document.getElementById('IO5Sets').value);" id="IO5Sets">

            </div>
            <div>
                <div class="item-line"> I/O 6 </div>
                <select id="IO6Type" onChange="newAJAXCommand('dscript.cgi?App_IOType6='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet6~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet6='+document.getElementById('IO6Sets').value);" id="IO6Sets">

            </div>
            <div>
                <div class="item-line"> I/O 7 </div>
                <select id="IO7Type" onChange="newAJAXCommand('dscript.cgi?App_IOType7='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet7~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet7='+document.getElementById('IO7Sets').value);" id="IO7Sets">
            </div>
            <div>
                <div class="item-line"> I/O 8 </div>
                <select id="IO8Type" onChange="newAJAXCommand('dscript.cgi?App_IOType8='+encodeURIComponent(this.value));" onmouseover="AttachedTypeText(this)" onmouseout="IOText(this)">
                  <option value="0">Auto</option>
                  <option value="1">Light</option>
                  <option value="2">Shutter</option>
                  <option value="3">Socket</option>
                  <option value="4">Motion</option>
                </select>
                <input type="text" value = "~App_IOSet8~" onkeyup="newAJAXCommand('dscript.cgi?App_IOSet8='+document.getElementById('IO8Sets').value);" id="IO8Sets">
            </div>
            
            <div onmouseover="EnPassText(this)" onmouseout="SecurityText(this)">
                <div class="item-line2"> I/O auto config </div>
                <input id="AutoIOChkBox" name="Enable Auto IO" type="checkbox" ~AutoIOChecked~ onclick="handleAutoIO(this)" />
            </div>
        </div>
        <div id="helpblock">
            <div ID="help">
            </div>
            <div>
                <div class='Indicator1'>  <img class='IO' id='Pend' src='DarkOff.png'/> Update Pending </div>
            </div>
        </div>
    </div>

<script type='text/javascript' src='globalfunctions.js'></script>
<script type='text/javascript' src='helptext.js'></script>
<script>

// define the default help text for this page
function PageText(x) {
    IOText(x)
}

// setup the dynamic page content
includeHTML();
PageText(0);

setupAutoIO(document.getElementById('AutoIOChkBox'));

function handleAutoIO(cb) {
    console.log('handleAutoIO...'); 
    if(cb.checked) {
        newAJAXCommand('dscript.cgi?App_EnableAutoIO=1');
    } else {
        newAJAXCommand('dscript.cgi?App_EnableAutoIO=0');
    }
    newAJAXCommand('dscript.cgi?SystemCmdUpdated=1');
    setupAutoIO(cb);
    console.log('handleAutoIO complete');
}

function setupAutoIO(cb) {
    console.log('setupAutoIO...');
    for (x = 1; x <= 8; x++) {   
        switch(x){
            case 1: t=~App_IOType1~;s="~App_IOSet1~";break;
            case 2: t=~App_IOType2~;s="~App_IOSet2~";break;
            case 3: t=~App_IOType3~;s="~App_IOSet3~";break;
            case 4: t=~App_IOType4~;s="~App_IOSet4~";break;
            case 5: t=~App_IOType5~;s="~App_IOSet5~";break;
            case 6: t=~App_IOType6~;s="~App_IOSet6~";break;
            case 7: t=~App_IOType7~;s="~App_IOSet7~";break;
            case 8: t=~App_IOType8~;s="~App_IOSet8~";break;
            default: t=0; s="";
        }
        if(cb.checked){
            document.getElementById('IO'+ x + 'Type').disabled = true;
            if(t != 4){ //do not disable motion type input (as people need to define which lights to turn on/off
                document.getElementById('IO'+ x + 'Sets').disabled = true;  
            }
        } else {
            document.getElementById('IO'+ x + 'Type').disabled = false;
            document.getElementById('IO'+ x + 'Sets').disabled = false; 
        }
        document.getElementById('IO'+ x + 'Type').value = t;
        document.getElementById('IO'+ x + 'Sets').value = s;
    }
    console.log('setupAutoIO complete');
}

</script>

</body>
</html>